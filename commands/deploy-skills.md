---
description: Deploy custom skills and commands from ~/.claude/ to GitHub
allowed-tools: [Bash, Read, Write, Glob, Grep]
---

# Deploy Custom Skills & Commands to GitHub

Deploy all custom (non-symlinked) skills from `~/.claude/skills/` and all command files from `~/.claude/commands/` to a public GitHub repository called `claude-skills`.

## Instructions

Execute the following steps in order. Use Bash for all commands. The git repo lives at `~/.claude/skills/`.

### Step 1: Check prerequisites

1. Check if `gh` CLI is installed: `command -v gh`
   - If not installed, run: `brew install gh`
   - If `brew` is also not installed, tell the user to install Homebrew first and stop
2. Check if `gh` is authenticated: `gh auth status`
   - If not authenticated, tell the user to run `gh auth login` and stop
3. Get the GitHub username: `gh api user --jq '.login'`

### Step 2: Initialize git repo

1. Check if `~/.claude/skills/.git` exists
2. If not, run:
   ```
   git -C ~/.claude/skills init
   git -C ~/.claude/skills branch -M main
   ```

### Step 3: Setup GitHub remote

1. Check if origin remote exists: `git -C ~/.claude/skills remote get-url origin 2>/dev/null`
2. If no remote:
   - Check if repo already exists on GitHub: `gh repo view <username>/claude-skills 2>/dev/null`
   - If repo does not exist, create it: `gh repo create claude-skills --public --description "Custom Claude Code skills and commands" --clone=false`
   - Add the remote: `git -C ~/.claude/skills remote add origin https://github.com/<username>/claude-skills.git`

### Step 4: Find custom skills and commands

**Skills:** Find all directories in `~/.claude/skills/` that are real directories (NOT symlinks):

```
find ~/.claude/skills -maxdepth 1 -mindepth 1 -type d ! -type l -not -name '.git' -not -name 'commands' -exec basename {} \;
```

**Commands:** Find all `.md` files in `~/.claude/commands/`:

```
find ~/.claude/commands -maxdepth 1 -name '*.md' -exec basename {} \;
```

If no custom skills AND no commands are found, report "Nothing to deploy" and stop.

### Step 5: Copy commands into repo

Copy command files from `~/.claude/commands/` into the repo so they can be tracked by git:

1. Create the directory: `mkdir -p ~/.claude/skills/commands`
2. Copy all `.md` files: `cp ~/.claude/commands/*.md ~/.claude/skills/commands/`

### Step 6: Generate .gitignore

Write a `.gitignore` file at `~/.claude/skills/.gitignore` using a whitelist approach:

```
# Auto-generated by /deploy-skills
# Ignore everything by default
*

# Allow .gitignore itself
!.gitignore

# Allow custom skill directories
!<skill-name>/
!<skill-name>/**

# Allow commands directory
!commands/
!commands/**
```

Add an entry pair (`!name/` and `!name/**`) for EACH custom skill found in Step 4. The `commands/` entries should always be included when there are command files.

Then append these exclusions at the end:

```

# Exclude junk files within allowed directories
.DS_Store
__pycache__/
*.pyc
.env
*.env
```

### Step 7: Stage and commit

1. Stage the gitignore: `git -C ~/.claude/skills add .gitignore`
2. Stage each custom skill: `git -C ~/.claude/skills add <skill-name>/` for each one
3. Stage the commands directory: `git -C ~/.claude/skills add commands/`
4. Stage deletions of removed skills/commands: `git -C ~/.claude/skills add -u`
5. Check if there are staged changes: `git -C ~/.claude/skills diff --cached --quiet`
   - If no changes, report "Everything is already up to date" and stop
6. Commit: `git -C ~/.claude/skills commit -m "Deploy skills & commands - <YYYY-MM-DD HH:MM:SS>"`

### Step 8: Push to GitHub

1. Check if `origin/main` exists: `git -C ~/.claude/skills rev-parse --verify origin/main 2>/dev/null`
   - If it does NOT exist (first push): `git -C ~/.claude/skills push -u origin main`
   - If it exists: `git -C ~/.claude/skills push origin main`

### Step 9: Report results

Tell the user:
- Which custom skills were deployed (list them)
- Which commands were deployed (list them)
- The GitHub repository URL: `https://github.com/<username>/claude-skills`
- Whether changes were pushed or everything was already up to date
